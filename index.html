<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thesis - Experiment 2 Questionnaire</title>

<style>
body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #f5f5f5;
    display: flex;
    justify-content: center;
}

.container {
    width: 100%;
    max-width: 500px;
    padding: 24px;
    box-sizing: border-box;
}

.card {
    background: white;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
}

h2 {
    font-size: 20px;
    margin-bottom: 20px;
}

button {
    width: 100%;
    padding: 16px;
    margin-bottom: 12px;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    background: black;
    color: white;
    cursor: pointer;
}

button:active {
    transform: scale(0.98);
}

input[type="text"] {
    width: 100%;
    padding: 14px;
    font-size: 16px;
    margin-bottom: 12px;
    border-radius: 12px;
    border: 1px solid #ccc;
}

#progress {
    font-size: 14px;
    margin-bottom: 12px;
    color: gray;
}

#result {
    display: none;
}

#preview {
    width: 100%;
    margin-top: 16px;
    border-radius: 12px;
    display: block;
}

canvas {
    display: none;
}
</style>
</head>
<body>

<div class="container">
    <div class="card">
        <div id="progress"></div>
        <h2 id="question"></h2>
        <div id="answers"></div>

        <div id="result">
            <p>Your artwork has been created.</p>
            <img id="preview">
            <button onclick="downloadImage()">Download Image</button>
        </div>
    </div>
</div>

<canvas id="artCanvas" width="1200" height="1800"></canvas>

<script>
const questions = [
    "How do you look back on memories?",
    "When faced with uncertainty, you feel:",
    "If something meaningful begins to fade, you:",
    "When something in your life begins to unexpectedly change, you tend to:",
    "What feels true to you right now?",
    "Name something you're afraid of losing:"
];

const options = [
    ["I revisit them often in my head.", "I document them.", "I avoid them so they don't consume me.", "I let them shift over time."],
    ["Anxiety.", "A sense of possibility.", "The urge to regain control.", "Disoriented."],
    ["Try to preserve it.", "Mourn it while it happens.", "Accept that it was never meant to stay.", "Capture it before it's gone."],
    ["Hold on to it tightly.", "Step back and observe.", "Prepare for the worst.", "Let it unfold."],
    ["Change feels inevitable.", "I'm tired of resisting what shifts.", "Stability feels safer than change.", "I don't know what's stable anymore."]
];

let current = 0;
let selections = [];
let customWord = "";

const questionEl = document.getElementById("question");
const answersEl = document.getElementById("answers");
const progressEl = document.getElementById("progress");
const resultEl = document.getElementById("result");
const canvas = document.getElementById("artCanvas");
const ctx = canvas.getContext("2d");
const preview = document.getElementById("preview");

function loadQuestion() {
    progressEl.textContent = `Question ${current + 1} of ${questions.length}`;
    questionEl.textContent = questions[current];
    answersEl.innerHTML = "";

    // Text input for last question
    if (current === 5) {
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "Type one word";
        input.style.width = "100%";
        input.style.padding = "16px";
        input.style.fontSize = "16px";
        input.style.marginBottom = "12px";
        input.style.borderRadius = "12px";
        input.style.border = "1px solid #ccc";

        const btn = document.createElement("button");
        btn.textContent = "Generate";
        btn.onclick = () => {
            customWord = input.value || " ";
            current++;
            generateArtwork();
            questionEl.style.display = "none";
            answersEl.style.display = "none";
            progressEl.style.display = "none";
            resultEl.style.display = "block";
        };

        answersEl.appendChild(input);
        answersEl.appendChild(btn);
        return;
    }

    options[current].forEach((option, index) => {
        const btn = document.createElement("button");
        btn.textContent = option;
        btn.onclick = () => selectAnswer(index);
        answersEl.appendChild(btn);
    });
}

function selectAnswer(index) {
    selections.push(index);
    current++;
    loadQuestion();
}

function generateArtwork() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const colors = ["#ff4d4d", "#4d79ff", "#4dff88", "#ffd24d"];

    // Draw 3 very large layered shapes
    for (let i = 0; i < 3; i++) {
        ctx.save();

        const sel = selections[i] || 0;
        ctx.fillStyle = colors[sel];
        ctx.globalAlpha = 0.6;

        const rotation = (Math.random() - 0.5) * 0.8;
        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.rotate(rotation);

        const width = canvas.width * (1.1 + Math.random() * 0.5);
        const height = canvas.height * (1.1 + Math.random() * 0.5);

        ctx.fillRect(-width / 2, -height / 2, width, height);

        ctx.restore();
    }
function downloadImage() {
    canvas.toBlob(function(blob) {
        const url = URL.createObjectURL(blob);

        const link = document.createElement("a");
        link.href = url;
        link.download = "thesis-artwork.png";

        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        URL.revokeObjectURL(url);
    }, "image/png");
}

    // Word Integration
    if (customWord.trim() !== "") {
    ctx.save();

    ctx.globalAlpha = 0.12 + Math.random() * 0.08;
    ctx.fillStyle = "#000";

    const randomSize = 90 + Math.random() * 90;
    ctx.font = `${randomSize}px sans-serif`;

    ctx.textBaseline = "middle";

    const edges = ["top", "bottom", "left", "right"];
    const chosenEdge = edges[Math.floor(Math.random() * edges.length)];

    const margin = 40;
    const text = customWord.toUpperCase();

    if (chosenEdge === "top") {
        ctx.textAlign = "center";
        const x = canvas.width / 2;
        const y = margin;
        ctx.fillText(text, x, y);
    }

    if (chosenEdge === "bottom") {
        ctx.textAlign = "center";
        const x = canvas.width / 2;
        const y = canvas.height - margin;
        ctx.fillText(text, x, y);
    }

    if (chosenEdge === "left") {
        ctx.textAlign = "left";
        const x = margin;
        const y = canvas.height / 2;
        ctx.fillText(text, x, y);
    }

    if (chosenEdge === "right") {
        ctx.textAlign = "right";
        const x = canvas.width - margin;
        const y = canvas.height / 2;
        ctx.fillText(text, x, y);

    }

    ctx.restore();
}
const dataURL = canvas.toDataURL("image/png");
preview.src = dataURL;

}
loadQuestion();
</script>

</body>
</html>